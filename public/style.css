:root{
  color-scheme: dark;

  /* Palette basée sur ton logo */
  --bg:#0f0b14d2;
  --card:#17121f;
  --line:#489448a8;

  --ink:#fff7f1;    /* texte global clair */
  --text:#fff7f1;
  --muted:#bfa8c7;  /* texte secondaire */

  --accent:#e26c0cb9;   /* orange neutre / CTA par défaut */
  --accent-2:#ff3b3baf; /* rouge imposteur */
  --accent-3:#5bec26a1; /* vert équipier / succès */

  --shadow: rgba(0,0,0,.35);
  --glow: 0 0 40px rgba(206, 17, 17, 0.18); /* halo doux orange */
}
/* Fix global de mise en page : les largeurs incluent padding + bordure */
*, *::before, *::after { box-sizing: border-box; }

/* Sécurité responsive des médias */
img, svg, canvas, video { max-width: 100%; height: auto; display: block; }


/* Fond + étoiles */
html,body{height:100%}
body{
  margin:0; color:var(--ink);
  font: 16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,"Noto Sans";
  background:
    radial-gradient(1200px 800px at 20% -10%, rgba(175, 97, 14, 0.644), transparent 60%),
    radial-gradient(1200px 800px at 120% 10%, rgba(238, 63, 63, 0.08), transparent 60%),
    var(--bg);
  overflow-y:auto;
}
.stars::before, .stars::after{
  content:""; position:fixed; inset:-20% -10% -10% -10%; pointer-events:none; z-index:-1;
  background-image: radial-gradient(#ffffff66 1px, transparent 1px);
  background-size: 3px 3px; opacity:.10; filter:drop-shadow(0 0 2px #ffffff33);
  animation: drift 160s linear infinite;
}
.stars::after{ opacity:.08; background-size: 2px 2px; animation-duration: 220s; }
@keyframes drift{ from{ transform:translateY(0)} to{ transform:translateY(200px)} }

/* Layout */
.wrap{max-width:880px;margin:0 auto;padding:16px}
.row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.muted{color:var(--muted)}
h1,h2,h3,h4{margin:0 0 8px 0}

/* Cartes (verre) */
.card{
  background: linear-gradient(180deg, rgba(255,255,255,0.05), rgba(255,255,255,0.025));
  border:1px solid rgba(255,255,255,0.1);
  border-radius:20px; padding:16px;
  box-shadow: 0 24px 60px rgba(0,0,0,.40), var(--glow);
}

/* Inputs */
.input, input{
  width:100%; border-radius:14px; border:1px solid rgba(255,255,255,.12);
  background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.03));
  color: var(--text); padding: 14px 14px; font-size:16px; outline:none; transition:.2s;
}
.input::placeholder, input::placeholder{ color:#bfa8c7 }
.input:focus, input:focus{
  border-color: color-mix(in srgb, var(--accent) 60%, white 0%);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 35%, transparent);
}

/* Boutons (CTA orange par défaut) */
button{
  display:block; width:100%;
  font-weight:900; letter-spacing:.3px;
  padding:14px 18px; border-radius:14px; border:0;
  background: linear-gradient(90deg, var(--accent), color-mix(in srgb, var(--accent-2) 35%, var(--accent) 65%));
  color:#2a0e16; cursor:pointer;
  box-shadow: 0 12px 28px color-mix(in srgb, var(--accent) 35%, transparent);
  transition: transform .06s ease, filter .2s ease;
}
button:hover{ filter:brightness(1.06); }
button:active{ transform: translateY(1px); }
.btn-secondary{
  background:#0f1523; border:1px solid var(--line); color:var(--text); font-weight:700; border-radius:14px; padding:12px 14px;
}

/* Roles (rouge/vert brand) */
.role{font-weight:900;border:1px solid currentColor;border-radius:999px;padding:6px 12px;display:inline-block}
.role.crew{ color:var(--accent-3); border-color:var(--accent-3); }
.role.imp{  color:var(--accent-2); border-color:var(--accent-2); }

/* Titres/sections */
.section-title{font-size:18px;margin:6px 0}
.hint-word{font-size:34px;font-weight:900;letter-spacing:.3px;margin:4px 0 8px}

/* Hero */
.hero{display:flex;gap:16px;align-items:center; padding:16px 14px; border-radius:18px;
  background:linear-gradient(180deg, #1b1422, #14101b); border:1px solid var(--line);
  box-shadow: inset 0 0 0 1px #21162b
}
.hero h1{font-size:28px; letter-spacing:.3px}
.hero svg{width:62px;height:62px; flex:0 0 62px; filter: drop-shadow(0 8px 18px rgba(255,168,77,.25));}

/* Tabs */
.tabs{margin-top:12px;border:1px solid var(--line);border-radius:14px;background:#140f1a}
.tab-nav{display:flex}
.tab-btn{flex:1;padding:12px 14px;border:0;background:transparent;color:#d9c1e3;font-weight:800;cursor:pointer}
.tab-btn[aria-selected="true"]{ color:#2a0e16; background:var(--accent); border-radius:12px; margin:6px; box-shadow:0 6px 16px rgba(255,168,77,.25) }
.tab-pane{display:none;padding:14px}
.tab-pane.active{display:block}

/* Scoreboard */
#scoreboard{max-width:880px;margin:16px auto 24px;background:#140f1a;border:1px solid var(--line);border-radius:16px;padding:12px; display:none; box-shadow: 0 16px 40px rgba(0,0,0,.35) }
#scoreboard ul{list-style:none;padding:0;margin:0;display:grid;grid-template-columns:1fr auto;row-gap:6px}
#scoreboard li{display:contents}
#scoreboard li span:last-child{justify-self:end;color:var(--muted)}
#scoreboard li span:first-child{font-weight:700}

/* Modal result */
#modal{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;align-items:center;justify-content:center;z-index:20}
#modal .box{background:#140f1a;border:1px solid var(--line);border-radius:16px;padding:16px;max-width:360px}
.result-banner{border:1px solid; border-radius:10px; padding:8px 12px; display:inline-block; margin:6px 0; font-weight:800; background:#140f1a}
.result-win{color:var(--accent-3);border-color:rgba(124,255,78,.8); box-shadow:0 0 20px rgba(124,255,78,.25)}
.result-lose{color:var(--accent-2);border-color:rgba(255,59,59,.8); box-shadow:0 0 20px rgba(255,59,59,.25)}

/* Règles / listes */
.rules{margin-top:10px;border:1px dashed var(--line);border-radius:12px;padding:12px;background:#140f1a}
.grid-votes{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:8px}

/* ====== BARRE DE PHASE (progress piloté en JS via --progress) ====== */
.phase-bar{
  display:grid; grid-template-columns: 1fr minmax(320px, 1.6fr) 1fr;
  align-items:center; gap:12px; border:1px solid var(--line);
  border-radius:12px; padding:10px 12px;
  background:linear-gradient(180deg, #1b1422, #14101b);
  box-shadow: inset 0 0 0 1px #21162b; margin-bottom:10px;
  position:relative; overflow:hidden;
}
.phase-left{ display:flex; align-items:center; gap:8px; }
.phase-center{ display:flex; justify-content:center; }
.phase-right{ display:flex; justify-content:flex-end; gap:10px; }
.phase-bar::after{
  content:""; position:absolute; inset:0; transform-origin:left center; transform: scaleX(var(--progress, 0));
  background: linear-gradient(90deg, rgba(255,168,77,.25), rgba(255,59,59,.25)); /* orange → rouge */
  mix-blend-mode: screen; pointer-events:none;
}
.kpi{
  min-width:66px; text-align:center; padding:6px 10px; border-radius:8px; border:1px solid var(--line);
  background:#140f1a; font-weight:800; color:#ffeef0; box-shadow: inset 0 0 0 1px #21162b
}

/* Chip thème */
.theme-chip{
  display:flex; align-items:center; gap:8px; padding:6px 14px; border-radius:999px;
  border:1px solid color-mix(in srgb, var(--accent) 70%, #fff 0%);
  background:linear-gradient(180deg, color-mix(in srgb, var(--accent) 18%, transparent), color-mix(in srgb, var(--accent-2) 14%, transparent));
  box-shadow:0 10px 28px rgba(255,168,77,.14); font-weight:800; max-width:100%; flex-wrap:wrap; justify-content:center
}
.theme-chip b{ color: #ffd0c4; font-weight:900; font-size:16px; text-transform:capitalize; white-space:normal; word-break:break-word; overflow-wrap:anywhere }

/* Indices list */
#hints p{ padding:8px 10px; border-radius:10px; background:#140f1a; border:1px solid var(--line) }

/* ====== VOTE — BOUTONS VERTS PERMANENTS ====== */
#vote-buttons button{
  background: var(--accent-3);
  color: #0a1a0a;                 /* lisible sur vert clair */
  border:1px solid color-mix(in srgb, var(--accent-3) 55%, #000 45%);
  text-align:left; padding-right: 40px;
  box-shadow: 0 6px 18px rgba(124,255,78,.20);
}
#vote-buttons button:hover{ filter:brightness(1.05); }
#vote-buttons button.selected{
  outline:2px solid color-mix(in srgb, var(--accent-3) 70%, #000 30%);
  box-shadow: 0 0 14px rgba(124,255,78,.30);
}
#vote-buttons button.selected::after{
  content:'✓'; position:absolute; right:12px; top:50%; transform:translateY(-50%); font-weight:900;
}

/* Tip imposteur */
.tip{
  margin:8px 0 12px; padding: 8px 12px;
  background: linear-gradient(180deg, rgba(255,230,150,.12), rgba(255,230,150,.08));
  border: 1px solid rgba(255,230,150,.35);
  border-radius: 8px; color: #ffe696; font-size: .95rem; font-style: italic;
  display:none; box-shadow: 0 10px 24px rgba(255,230,150,.08);
}

/* Responsive */
@media (max-width:600px){
  html, body { overscroll-behavior-y: contain; }
  .wrap{ max-width: 100%; padding: 10px; }
  .card{ padding: 12px; border-radius: 14px; }
  .row{ flex-direction: column; align-items: stretch; gap: 8px; }
  .hero{ gap: 10px; padding: 12px; }
  .hero svg{ width: 46px; height: 46px; flex: 0 0 46px; }
  .hero h1{ font-size: 22px; }
  .muted{ font-size: 14px; }
  h3.section-title{ font-size: 16px; }
  .hint-word{ font-size: 24px; word-break: break-word; }
  input, button{ padding: 12px; font-size: 15px; min-height: 44px; }
  .tabs{ margin-top: 10px; }
  .tab-btn{ padding: 10px 12px; font-size: 14px; }
  .tab-btn[aria-selected="true"]{ margin: 6px; }
  .tab-pane{ padding: 10px; }
  .phase-bar{ grid-template-columns: 1fr; gap: 6px; text-align:center; padding: 8px 10px; }
  .phase-left, .phase-center, .phase-right{ justify-content:center; }
  .kpi{ min-width: auto; padding: 6px 8px; font-size: 14px; }
  .theme-chip{ padding: 6px 10px; gap: 6px; }
  .theme-chip b{ font-size: 15px; }
  #hints p{ padding: 8px 10px; font-size: 15px; }
  .grid-votes{ grid-template-columns: 1fr; gap: 8px; }
  #vote-buttons button{ padding-right: 38px; font-size: 15px; }
  #players .player, #players div{ padding: 8px 10px; border-radius: 10px; background:#140f1a; border:1px solid var(--line) }
  #lb{ padding: 10px; }
  #scoreboard{ position: static; margin: 12px 10px 18px; padding: 10px; }
  #scoreboard ul{ grid-template-columns: 1fr auto; row-gap: 6px; }
  #scoreboard li span:first-child{ overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
  .pill{ padding: 5px 8px; font-size: 13px; }
  .role{ padding: 6px 10px; font-size: 13px; }
  .signature-badge{ font-size: 12px; padding: 4px 8px; }
  #modal .box{ max-width: 92vw; width: 92vw; padding: 14px; }
}

/* Signature badge */
.title-line{ display:flex; align-items:center; gap:12px; flex-wrap:wrap }
.signature-badge{
  font-size:13px; font-weight:800; letter-spacing:.2px; color:var(--ink); opacity:.9;
  padding:4px 10px; border-radius:999px; border:1px solid var(--line);
  background: linear-gradient(180deg, rgba(255,168,77,.12), rgba(255,168,77,.06));
  box-shadow: 0 6px 16px rgba(255,168,77,.12)
}
.signature-badge::before{ content:'✦'; margin-right:6px; opacity:.9 }

/* Accessibilité du chip en grille */
.phase-left, .phase-center, .phase-right { min-width: 0; }

/* Bouton install PWA */
#btn-install{
  position: sticky; top: 0; z-index: 1000;
  width: 100%; border-radius: 0; padding: 12px 16px; font-weight: 800;
}
/* 1) VOTE — boutons lisibles (fond vert + texte blanc) */
#vote-buttons button{
  background: var(--accent-3);
  color: var(--ink);
  border: 1px solid color-mix(in srgb, var(--accent-3) 55%, black 45%);
  box-shadow: 0 10px 28px color-mix(in srgb, var(--accent-3) 25%, transparent);
  font-weight: 800;
}

#vote-buttons button:hover{
  filter: brightness(1.06);
  transform: translateY(-1px);
}

#vote-buttons button:active{
  transform: translateY(0);
}

#vote-buttons button.selected{
  background: color-mix(in srgb, var(--accent-3) 90%, white 10%);
  outline: 2px solid color-mix(in srgb, var(--accent-3) 75%, white 25%);
  box-shadow: 0 12px 32px color-mix(in srgb, var(--accent-3) 30%, transparent);
}

#vote-buttons button:disabled{
  opacity: .6;
  cursor: default;
  transform: none;
}

/* 2) HINT — que l’input/CTA passe au-dessus du calque translucide éventuel */
#screen-hint .input,
#screen-hint input,
#screen-hint #btn-send-hint{
  position: relative;
  z-index: 2;  /* garantit qu’aucun calque décoratif ne les masque */
}

/* 3) Scores — chiffres nets, bien alignés à droite */
#scoreboard li span:last-child{
  color: color-mix(in srgb, var(--ink) 85%, var(--muted) 15%);
  font-variant-numeric: tabular-nums; /* colonnes qui “tombent” bien */
  text-align: right;
}

/* 4) Petits plus de lisibilité */
#hints p{
  color: var(--ink);
  background: color-mix(in srgb, var(--card) 92%, black 8%);
  border: 1px solid var(--line);
}

/* Puces “Thème”, minuteur, etc. — bord/police un chouïa plus lisibles */
.kpi{
  border-color: color-mix(in srgb, var(--line) 70%, var(--ink) 30%);
}
.theme-chip{
  border-color: color-mix(in srgb, var(--accent) 60%, var(--ink) 40%);
}
/* --- Progress header & bar --- */
.phase-head { position: relative; z-index: 3; } /* les pastilles au-dessus */
.phase-progress {
  position: relative;          /* on la met sous les pastilles */
  height: 8px;
  margin-top: .8rem;           /* espace pour ne pas toucher les pastilles */
  background: rgba(255,255,255,.06);
  border-radius: 999px;
  overflow: hidden;
  z-index: 1;
}
.phase-progress .bar {
  height: 100%;
  width: var(--progress, 0%);  /* tu mets à jour cette var en JS */
  background: linear-gradient(90deg, var(--accent), #ffc28a);
  transition: width .2s linear;
}
/* --- Vote buttons (calmer) --- */
.vote-btn {
  background: rgba(124,255,78,.16);           /* --accent-3 adouci */
  border: 1px solid rgba(124,255,78,.35);
  color: #eaffea;
  border-radius: 14px;
  padding: .8rem 1.1rem;
  font-weight: 700;
  backdrop-filter: blur(2px);
  transition: background .15s ease, border-color .15s ease, transform .04s ease;
}
.vote-btn:hover {
  background: rgba(124,255,78,.24);
  border-color: rgba(124,255,78,.5);
}
.vote-btn:active { transform: translateY(1px); }
.vote-btn[aria-pressed="true"],
.vote-btn.is-selected {
  background: rgba(124,255,78,.32);
  border-color: rgba(124,255,78,.6);
}
/* --- Flash fin de timer --- */
@keyframes phase-flash { 0%{opacity:0} 50%{opacity:.28} 100%{opacity:0} }
.flash-now::after{
  content:"";
  position: fixed; inset: 0;
  background:#fff;
  pointer-events:none;
  animation: phase-flash .24s ease-out;
}
/* === PATCH: layering de la barre de progression === */
.phase-bar { 
  position: relative; 
  isolation: isolate;            /* crée un contexte d’empilement, évite que ::after recouvre le contenu */
}
.phase-bar::after { 
  z-index: 0; 
  pointer-events: none;          /* ne bloque pas les clics */
}
.phase-left,
.phase-center,
.phase-right {
  position: relative;
  z-index: 1;                    /* les pastilles (rôle / thème / timer) passent au-dessus */
}
/* === PATCH: boutons de vote (plus doux) === */
#vote-buttons button{
  position: relative;                    /* pour placer le ✓ */
  background: rgba(124,255,78,.16);      /* vert adouci */
  color: var(--ink);
  border: 1px solid rgba(124,255,78,.35);
  box-shadow: 0 10px 28px rgba(124,255,78,.12);
  text-align: left;
  padding: .9rem 2.2rem .9rem 1rem;      /* place pour le ✓ à droite */
  font-weight: 800;
  transition: background .15s ease, transform .04s ease, box-shadow .15s ease, outline-color .15s;
}
#vote-buttons button:hover{
  background: rgba(124,255,78,.24);
  transform: translateY(-1px);
}
#vote-buttons button:active{
  transform: translateY(0);
}
#vote-buttons button.selected{
  background: rgba(124,255,78,.32);
  outline: 2px solid rgba(124,255,78,.5);
  box-shadow: 0 12px 32px rgba(124,255,78,.18);
}
#vote-buttons button.selected::after{
  content: '✓';
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  font-weight: 900;
}
#vote-buttons button:disabled{
  opacity: .6;
  cursor: default;
  transform: none;
  box-shadow: none;
  outline: none;
}
/* === PATCH: flash de fin de timer === */
@keyframes hol-phase-flash { 
  0% { opacity: 0 } 
  50% { opacity: .28 } 
  100% { opacity: 0 } 
}
.flash-now::after{
  content: "";
  position: fixed;
  inset: 0;
  background: #fff;
  pointer-events: none;
  animation: hol-phase-flash .24s ease-out;
}
/* === BACKGROUND SVG (plein écran) === */
:root{
  --bg-overlay-top: rgba(0,0,0,.45);   /* voile pour lisibilité du texte */
  --bg-overlay-bottom: rgba(0,0,0,.65);
}

/* assure que le contenu passe AU-DESSUS du fond */
.wrap, main, #app, #root { position: relative; z-index: 1; }

body::before{
  content: "";
  position: fixed;
  inset: 0;
  z-index: 0;                  /* sous le contenu */
  pointer-events: none;        /* ne bloque aucun clic */
  background:
    radial-gradient(120% 100% at 50% 0%, var(--bg-overlay-top), var(--bg-overlay-bottom)),
    center / cover no-repeat url("/images/background-hero.svg?v=1");
  will-change: transform;      /* petit hint perf */
}

/* (optionnel) recadrage différent mobile */
@media (max-width: 800px){
  body::before{
    background-position: 50% 35%; /* remonte un peu le centre du visuel */
  }
}

/* === FORCE BACKGROUND SVG SUR .stars::before === */
body.stars::before{
  content:"";
  position: fixed;
  inset: 0;
  z-index: 0;                  /* sous le contenu */
  pointer-events: none;
  /* on remplace tout éventuel ancien fond des étoiles */
  background:
    radial-gradient(120% 100% at 50% 0%, rgba(0,0,0,.45), rgba(0,0,0,.65)),
    center / cover no-repeat url("/images/background-hero.svg?v=1") !important;
  opacity: 1 !important;
  filter: none !important;
}
/* === Bandeau mise à jour PWA === */
#update-banner{
  position: fixed;
  left: 50%;
  bottom: 18px;
  transform: translateX(-50%);
  z-index: 9999;
}
#update-banner .update-card{
  display: flex;
  align-items: center;
  gap: 12px;
  background: rgba(20,20,30,.9);
  border: 1px solid rgba(255,255,255,.12);
  border-radius: 14px;
  padding: 10px 14px;
  box-shadow: 0 12px 32px rgba(0,0,0,.35);
  backdrop-filter: blur(4px);
  color: #fff;
  font-weight: 700;
}
#update-banner .update-actions{
  display: flex; gap: 8px; margin-left: 10px;
}
#update-reload{
  background: #33d17a;
  color: #0b0f14;
  border: none;
  border-radius: 10px;
  padding: 8px 10px;
  font-weight: 900;
}
#update-reload:hover{ filter: brightness(1.05); }
#update-dismiss{
  background: transparent;
  color: #cfd7df;
  border: 1px solid rgba(255,255,255,.18);
  border-radius: 10px;
  padding: 8px 10px;
  font-weight: 800;
}
/* === Pastille "Manche" compacte dans la barre de phase === */
.pill.s{
  padding: 4px 10px;
  font-size: 13px;
  border-radius: 999px;
  border: 1px solid var(--line);
  background: linear-gradient(180deg, #1b1422, #14101b);
  box-shadow: inset 0 0 0 1px #21162b;
  font-weight: 800;
  color: var(--ink);
  display: inline-flex;
  align-items: center;
  gap: 6px;
  white-space: nowrap;
}
.pill.s::before{
  content:"🔁";
  filter: drop-shadow(0 0 10px rgba(255,255,255,.05));
}
/* HOME — empêcher tout décalage latéral quand c'est étroit */
#screen-home .row { width: 100%; margin-left: 0; margin-right: 0; }
#screen-home .tab-pane { padding-left: 12px; padding-right: 12px; }

/* Les entrées/boutons occupent 100% sans déborder */
#screen-home input,
#screen-home button { width: 100%; min-width: 0; } /* min-width:0 pour éviter l'élargissement en flex */




